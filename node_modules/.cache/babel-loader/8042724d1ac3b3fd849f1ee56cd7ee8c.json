{"ast":null,"code":"import { Component } from \"react\";\nimport { addTask, getTasks, updateTask, deleteTask } from \"../services/taskServices\";\nclass Tasks extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      tasks: [],\n      currentTask: \"\"\n    };\n    this.handleChange = _ref => {\n      let {\n        currentTarget: input\n      } = _ref;\n      this.setState({\n        currentTask: input.value\n      });\n    };\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const originalTasks = this.state.tasks;\n      try {\n        const {\n          data\n        } = await addTask({\n          task: this.state.currentTask,\n          uid: JSON.parse(localStorage.getItem(\"user\")).id\n        });\n        const tasks = originalTasks;\n        tasks.push(data);\n        this.setState({\n          tasks,\n          currentTask: \"\"\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    this.handleUpdate = async currentTask => {\n      const originalTasks = this.state.tasks;\n      try {\n        const tasks = [...originalTasks];\n        const index = tasks.findIndex(task => task._id === currentTask);\n        tasks[index] = {\n          ...tasks[index]\n        };\n        tasks[index].completed = tasks[index].completed;\n        this.setState({\n          tasks\n        });\n        await updateTask(currentTask, {\n          completed: tasks[index].completed\n        });\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(error);\n      }\n    };\n    this.handleDelete = async currentTask => {\n      const originalTasks = this.state.tasks;\n      try {\n        const tasks = originalTasks.filter(task => task._id !== currentTask);\n        this.setState({\n          tasks\n        });\n        await deleteTask(currentTask);\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(error);\n      }\n    };\n  }\n  async componentDidMount() {\n    const uid = JSON.parse(localStorage.getItem(\"user\")).id;\n    try {\n      const {\n        data\n      } = await getTasks();\n      let datas = [];\n      data.map(todo => {\n        if (uid === todo.uid) {\n          datas.push(todo);\n        }\n      });\n      this.setState({\n        tasks: datas\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\nexport default Tasks;","map":{"version":3,"names":["Component","addTask","getTasks","updateTask","deleteTask","Tasks","constructor","arguments","state","tasks","currentTask","handleChange","_ref","currentTarget","input","setState","value","handleSubmit","e","preventDefault","originalTasks","data","task","uid","JSON","parse","localStorage","getItem","id","push","error","console","log","handleUpdate","index","findIndex","_id","completed","handleDelete","filter","componentDidMount","datas","map","todo"],"sources":["D:/6th sem/HCI/Co-act-main/Co-act-main/src/components/Tasks.js"],"sourcesContent":["import { Component } from \"react\";\nimport {\n  addTask,\n  getTasks,\n  updateTask,\n  deleteTask,\n} from \"../services/taskServices\";\n\nclass Tasks extends Component {\n  state = { tasks: [], currentTask: \"\" };\n  async componentDidMount() {\n    const uid = JSON.parse(localStorage.getItem(\"user\")).id;\n    try {\n      const { data } = await getTasks();\n      let datas = [];\n      data.map((todo) => {\n        if (uid === todo.uid) {\n          datas.push(todo);\n        }\n      });\n      this.setState({ tasks: datas });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleChange = ({ currentTarget: input }) => {\n    this.setState({ currentTask: input.value });\n  };\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    const originalTasks = this.state.tasks;\n    try {\n      const { data } = await addTask({\n        task: this.state.currentTask,\n        uid: JSON.parse(localStorage.getItem(\"user\")).id,\n      });\n      const tasks = originalTasks;\n      tasks.push(data);\n      this.setState({ tasks, currentTask: \"\" });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  handleUpdate = async (currentTask) => {\n    const originalTasks = this.state.tasks;\n    try {\n      const tasks = [...originalTasks];\n      const index = tasks.findIndex((task) => task._id === currentTask);\n      tasks[index] = { ...tasks[index] };\n      tasks[index].completed = tasks[index].completed;\n      this.setState({ tasks });\n      await updateTask(currentTask, {\n        completed: tasks[index].completed,\n      });\n    } catch (error) {\n      this.setState({ tasks: originalTasks });\n      console.log(error);\n    }\n  };\n\n  handleDelete = async (currentTask) => {\n    const originalTasks = this.state.tasks;\n    try {\n      const tasks = originalTasks.filter((task) => task._id !== currentTask);\n      this.setState({ tasks });\n      await deleteTask(currentTask);\n    } catch (error) {\n      this.setState({ tasks: originalTasks });\n      console.log(error);\n    }\n  };\n}\n\nexport default Tasks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}